# Intro
Paired recording datasets are conceptually very simple but can be used to tackle a variety of questions. Here we propose and describe a list of analysis projects to be carried out on our two paired recording datasets (Marques-Smith et al., 2018; Neto et al., 2016). The Kampff lab will be actively working on them and we encourage anyone interested in these topics to contribute and collaborate with us.

## Goals
Our first aim is to produce collaborative publications following up on the Marques-Smith et al (2018) preprint which mainly describes the dataset and methods used to collect it. These publications will focus on i) advancing analysis of extracellular recording datasets and ii) developing strategies to exploit the massive amounts of data created by new generation CMOS probes, as well as new approaches enabled by their high channel count and density.

Our second aim is to experiment with GitHub as a platform for transparent and credited scientific collaboration between scientists distributed all over the world. GitHub provides an infrastructure that allows interested parties anywhere to work concertedly on the same problem, communicate and provide feedback on each other's ideas and be acknowledged clearly for their inputs with full transparency. We believe massively parallel, coordinated and transparent workflows such as this are essential for scientific progress when dealing with large, complex datasets.

## How do I contribute?
The more people contribute to this repository, the more successful our experiment in collaboration will be. The price of that potential success is that we will need to try and keep the repository organised.  

The **'master' branch** is the core, stable release of the project. Think of it as the canon, the consensus. Each follow-up project has its own **'project-specific' branch** ('Prj n'), which can be thought of as work in progress. When a follow-up project is completed, it becomes part of the master branch.   

There are two basic aspects to which you can contribute:
1. **Improving the core of the project.** You may find a bug in our code, a scientific problem with the way we conduct a certain analysis, or have an idea for improvements on something we've done. In this case, you should make a new branch from the 'master branch', work on it, and then submit your contribution.
2. **Developing/contributing to a follow-up project.** This can be one of our suggestions or your own. In this scenario, you should make a new branch from the project-specific branch, work on it, and then submit your contribution.  
  
To get everyone on the same page, we came up with a checklist for a contribution.
  
### Step-by-step guide for contributing  
a. Create a GitHub account if you don't have one already.  
b. Install GitHub desktop.  


1. Raise an issue with a brief description of it and what your plan is. This could be a bug in our code, an improvement to our analysis, or a proposal of a contribution to one of our suggested projects. Think of raising issues as **peer-review** - you're either finding a problem with what we've done or suggesting further work. Putting the issue out there also gives us and others the chance to comment and discuss with you. Goes without saying, but we'll say it: please keep debate civilized and constructive.
2. Fork the repository.
3. Create a branch to work on. If you're addressing something in the core of the project, you should branch off the **master branch**. If your contribution relates to a follow-up, please branch off the **project-specific** branch.
4. Clone the repository into your hard-drive.
5. Resolve any dependencies if needed (we'll provide more info on this).
6. [Work, work, work, work, work](https://www.youtube.com/watch?v=HL1UzIK-flA). Commit and push changes to your working branch of the repository.
7. When happy, send a pull request. We and other collaborators will check your contribution, give you feedback/review if necessary, and upon consensus, it will be merged with the project-specific branch. 

## What if I have my own idea?
If you have an idea that isn't listed here, we would really like to hear about it. To pitch it, simply add a project to the list stating a title, providing a short description (see the examples of ongoing projects), and submit this as a **pull request**. If you'd like to provide further context and info, email Andre at andrefmsmith@gmail.com. Based on the info you provide us, we can give you feedback whether the idea is feasible within the constraints of our dataset.

The nice thing about submitting your project idea as a pull request is that **you** get public credit for your contribution.

## Ongoing Projects

**1. Mapping synaptic connectivity using dense extracellular probes**  
*One of the most exciting features of high channel-count/density probes is the drastic increase in number of potential pair-wise synaptic interactions between recorded units. One direction for this project is to focus on the 5 whole-cell recordings, detect EPSPs in them and try to match these to pre-synaptic spikes of units sorted from the accompanying Neuropixel recording. Another would be to simply use our Neuropixel recordings as a testing ground for algorithms attempting to infer synaptic connectivity from firing rates of sorted units. In the latter case, the benefit of the paired-recording dataset is that you can rely on the "ground-truth" neuron as being a genuine unit.*

**2. Exploring axon terminal potentials (AxTPs)**  
*Axon terminals generate extracellular electrical fields, which can be detected by extracellular channels that are close enough to them - see [Swadlow & Gusev 2000](https://www.physiology.org/doi/abs/10.1152/jn.2000.83.5.2802?url_ver=Z39.88-2003&rfr_id=ori%3Arid%3Acrossref.org&rfr_dat=cr_pub%3Dpubmed), [Swadlow et al 2002](http://www.jneurosci.org/content/22/17/7766.long), [Hagen et al., 2017](http://www.jneurosci.org/content/37/20/5123.long) and [Shein-Idelson et al., 2017](https://www.nature.com/articles/nmeth.4393). However, these signals are far too small (a few uV) to be detected on a single trial basis. Moreover, to be convincingly recognised as an AxTP, the signal must be far enough from the somatic compartment that it cannot simply be explained as distal detection of an attenuated somatic action potential. Our pair-recorded cells are units with known spike times and location in space. Moreover, Neuropixel probes have extremely high channel density, greatly increasing the likelihood that a channel happens to be close to a recorded cell's axon terminal. This means in our dataset we can average thousands of spikes of a pair-recorded unit and search for AxTP signatures in channels that are far from the soma. Upon finding AxTPs in a channel, we can enquire if the firing rate of units in that channel was modulated by spiking of the AxTP's "parent" cell. The AxTP could thus potentially offer an added level of assurance for inferred unit-to-unit synaptic connectivity, by providing a mechanistic, physiological substrate. Our dataset contains both putative pyramidal and interneuron pair-recorded units, meaning we can search for excitatory or inhibitory synaptic interactions.*

**3. Extracting orientation and gross morphological features from extracellular
recordings.**  
*In a landmark study, [Henze and colleages](https://www.physiology.org/doi/abs/10.1152/jn.2000.84.1.390?url_ver=Z39.88-2003&rfr_id=ori%3Arid%3Acrossref.org&rfr_dat=cr_pub%3Dpubmed) recorded from the same neuron using tetrodes and intracellular recordings, obtaining morphological reconstructions for a subset of the recorded cells. A follow-up modelling study based on this dataset - [Gold et al., 2006](https://www.physiology.org/doi/abs/10.1152/jn.00979.2005?url_ver=Z39.88-2003&rfr_id=ori%3Arid%3Acrossref.org&rfr_dat=cr_pub%3Dpubmed) - explained how and why extracellular spike waveform varies with electrode position relative to the recorded cell and its neurites. In the Marques-Smith et al (2018) preprint, we used a simple approach to classify the extracellular spike waveforms found in different channels for the same cells, and managed to relate this to estimated neuronal orientation. Biphasic negative waveforms were mainly found around the soma and basal dendritic compartments, biphasic positive spikes locatde tendentially to the apical and distal dendrites and triphasic waveforms clustered at the trunk of the apical dendrite. In this project we would first like to improve on this by coming up with a more sensitive waveform classification algorithm. On a second level, and thinking further ahead, given a) known constraints on the attenuation of electrical fields with distance in the brain, b) previous biophysical conductance modeling studies such as Gold et al., and c) the high channel density of CMOS probes, can we derive any gross neuronal morphological features from extracellular waveform characteristics, given a known position for the soma?  If not, what data are we missing to achieve this? One of the great strengths of imaging-based approaches to recording neural activity is their ability to relate spikes to spatially-identifiable neurons and their cellular and molecular features. Strategies to link these levels of enquiry to extracellular recordings would be a fantastic advancement for the field.*

**4. Do "dark neurons" share common features?**  
*[Shoham, O'Connor and Segev](https://link.springer.com/content/pdf/10.1007/s00359-006-0117-6.pdf), amongst others, have wondered if we have a "dark neuron problem" in extracellular recordings: are there neurons in the brain that, by virtue of their biophysical and morphological features, upon spiking generate weaker electrical fields than expected, making them harder to detect using extracellular probes? Our full dataset comprises 43 pair-recorded neurons. We could detect extracellular spike waveforms for 21 of these neurons. Most of the remaining 22 cells were too far from any extracellular channel to be detected. However, we identified a subset of 7 (spiking) neurons which were undeniably close enough to the probe that their extracellular spikes should have been visible to us. In the preprint, we excluded for these neurons the possibility that our estimate for their distance to the probe was inaccurate or compromised by misalignment. Are there any features common to these neurons that we can identify from the patch-clamp recording and that set them apart from neurons whose spikes were reliably detected extracellularly?*

**5. Cell-type specific differences in extracellular action potential waveforms**  
*Though it has been consistently reported that extracellular probes mainly detect activity from neurons up to 60 um away from the probe, we and [others](https://www.physiology.org/doi/abs/10.1152/jn.2000.84.1.390?url_ver=Z39.88-2003&rfr_id=ori%3Arid%3Acrossref.org&rfr_dat=cr_pub%3Dpubmed) have found cells that seem to overperform and buck this trend. Namely, there are 3 cells in our dataset that showed extracellular peak-peak amplitudes over 200 uV but were located 60-100 um away from the nearest channel. Are there biophysical features that predict how easily a neuron's spike can be detected extracellularly? Can such features be extracted from cell-attached or whole-cell recordings of a neuron? This is the flip-side of Project 4; paraphrasing both projects, are some cell types under- or over-represented in extracellular recordings?*

**6. Benchmarking automated sorting algorithms.**  
*Spike-sorting is a complex process. Other neuroscientists have made great advances in creating analytical tools and algorithms to improve our ability to isolate single units, but for most extracellular physiologists spike-sorting still involves a manual processing/curation stage. Besides being time-consuming and labour-intensive, this feature undermines reproducibility and it would therefore be highly desireable to reach a point where the sorting process is fully automated. In this project we would like to collaborate with scientists working on automated sorting to benchmark algorithm performance fairly. The goal is not to promote a  [Battle Royale](https://en.wikipedia.org/wiki/Battle_Royale_(film)) of spike-sorting - though that may well prove to be an entertaining spectator sport - but rather to compare where each algorithm excels and fails, with the hope of identifying consensual optimal strategies that lead to the collaborative development of improved tools.*

**7. The human psychophysics of spike-sorting.**  
*Every extracellular electrophysiologist has been in the situation where the whole lab is gathered around a computer screen debating whether to split or merge a potential unit. This familiar scenario highlights how complex the sorting process is, how much it depends on experience, and how different human operators rely on distinct strategies and features to make decisions on sorting. In the year 2000, an important paper by [Harris and colleagues](https://www.physiology.org/doi/pdf/10.1152/jn.2000.84.1.401) set out to quantify the Type I and II error rates introduced by human spike-sorting operators on the [Henze et al](https://www.physiology.org/doi/abs/10.1152/jn.2000.84.1.390?url_ver=Z39.88-2003&rfr_id=ori%3Arid%3Acrossref.org&rfr_dat=cr_pub%3Dpubmed) ground-truth dataset. We would like to conduct a similar study here, but expanding inquiry of human factors through participant self-report of strategies and observations, as well as by potentially recording biometric data (eye-tracking, reaction time) during sorting sessions. The goal would be to "reverse-engineer" cognitive strategies that experienced and accurate sorters use to make difficult decisions, which may in turn inform us about how best to implement fully automated sorting.*

**8. Backpropagating Action Potentials and Multi-channel Spike Waveforms**  
*High-density CMOS probes provide high spatial sampling of extracellular waveforms, as can be seen from the examples we provide in Figure 7 and its supplements. Recently, [Jia et al (2018, biorXiv)](https://www.biorxiv.org/content/early/2018/07/25/376863) from the Allen Brain Institute provided a  compelling demonstration of how this feature of Neuropixels probes can be useful. Here, I would like to extend the analysis of spatiotemporal dynamics of EAP waveforms, looking at backpropagation of action potentials, their trajectory motifs and  reliability.*
